  :root { --bg:#0d1028; --ink:#eaeaea; --p1:#3bd1ff; --p2:#ffc04d; --hl:rgba(255,255,255,.18); }
  *{box-sizing:border-box}
  body{margin:0;background:#0b0e1e;color:#eaeaea;font-family:system-ui,Segoe UI,Roboto,Arial}
  .menu-screen{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:40px;background:radial-gradient(ellipse at center,#0b0f23 0%,#1b1e5a 55%,#2a2e8f 100%);z-index:1000}
  .logo{font-size:64px;font-weight:900;letter-spacing:2px}
  .logo .spin{display:inline-block;color:var(--p2);animation:spin 4s linear infinite}
  #start{font-size:20px;padding:12px 24px}
  @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
  .page{max-width:1100px;margin:24px auto;padding:0 16px;display:grid;grid-template-columns:1fr 320px;gap:16px}
  .card{background:linear-gradient(180deg,#12142f,#1a1f56);border:1px solid rgba(255,255,255,.08);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .board-wrap{padding:16px}
  .side{padding:16px;display:flex;flex-direction:column;gap:12px}
  .hud{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:10px}
  .pill{background:rgba(255,255,255,.07);backdrop-filter:blur(6px);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.15);font-weight:600}
  .btn{cursor:pointer;user-select:none}
  .btn:hover{background:rgba(255,255,255,.12)}
  .btn:active{transform:translateY(1px)}
  select.pill{color:inherit;background:rgba(255,255,255,.07);backdrop-filter:blur(6px);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.15);font-weight:600}
  .btn.disabled{opacity:.45;pointer-events:none;cursor:default}
  .pill-input{color:inherit;background:rgba(255,255,255,.07);backdrop-filter:blur(6px);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.15);font-weight:600;min-width:140px}
  .pill-input:focus{outline:none;border-color:rgba(59,209,255,.7);box-shadow:0 0 0 2px rgba(59,209,255,.15)}
  .pill-input::placeholder{color:rgba(234,234,234,.5)}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .online-controls{margin-top:6px}
  .online-controls .pill{display:flex;align-items:center;gap:6px}
  .status{font-weight:700;text-transform:uppercase;letter-spacing:.6px}
  .status[data-state="offline"]{background:rgba(255,255,255,.05);color:#f4f4f4}
  .status[data-state="waiting"]{background:rgba(255,191,77,.18);color:#ffdf99}
  .status[data-state="connecting"]{background:rgba(59,209,255,.18);color:#9ae7ff}
  .status[data-state="connected"]{background:rgba(138,255,122,.18);color:#c6ffbf}
  .status[data-state="error"]{background:rgba(255,110,110,.2);color:#ffbbbb}
  .title{font-weight:800;letter-spacing:.2px}
  #board{width:100%;max-width:720px;margin:0 auto;height:auto;aspect-ratio:3/4;background:radial-gradient(ellipse at center,#0b0f23 0%,#1b1e5a 55%,#2a2e8f 100%);
         border-radius:14px;box-shadow:0 10px 40px rgba(0,0,0,.45);border:16px solid #f2f2f2;
         transform-origin:center;}
  #board.flipped{transform:rotate(180deg);}
  #board.flipped text{transform:rotate(180deg);transform-box:fill-box;transform-origin:center;}
  svg text{font-weight:700;pointer-events:none}
  .node{cursor:pointer}
  .node circle{fill:#f2f2f2;stroke:#d6d6d6;stroke-width:2}
  .node.active circle{stroke:#00e0ff;stroke-width:3}
  .edge{stroke:#e8e8e8;stroke-width:6;stroke-linecap:round;opacity:.95}
  .piece{cursor:grab}
  .piece rect{stroke:#00000040;stroke-width:2}
  .p1 rect{fill:var(--p1)}
  .p2 rect{fill:var(--p2)}
  .piece:focus{outline:none}
  .piece:focus rect{stroke:#00e0ff;stroke-width:3}
  .winline{stroke:#8aff8a;stroke-width:10;stroke-linecap:round;opacity:.9;filter:drop-shadow(0 0 8px #77ff77)}
  .log{height:360px;overflow:auto;border-radius:10px;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.08);padding:10px;font-size:13px}
  .log b{color:#fff}
  .small{opacity:.9;font-size:12px}
  .sep{height:1px;background:rgba(255,255,255,.08);margin:6px 0}
  .hint{font-size:12px;opacity:.85}
  .analysis-panel{margin-top:10px;display:flex;flex-direction:column;gap:8px}
  #board.analyzing{pointer-events:none}

@media (max-width: 768px){
  .page{grid-template-columns:1fr;padding:0 8px}
  .log{height:200px}
}
